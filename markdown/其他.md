# Restful

- 用 URL 定位资源，用 HTTP 描述操作
- 应该将 API 的版本号放入 URL
- 每个网址代表一种资源，所以网址中不能有动词，只能有名词，往往与数据库的表格名对应
- 对于资源的具体操作类型 CURD，由 HTTP 动词表示，例如查询用 GET 方式请求
- 使用 HTTP 状态码表达处理结果，例如成功为 200，无权限 403，而不能全都是 200
- 返回尽量使用 JSON 格式，避免使用 XML

# JWT

## 组成

- base64UrlEncode(header) + ‘.’ + base64UrlEncode(payload) + ‘.’ + signature
- signature：签证信息，由 HMAC_SHA256((base64UrlEncode(header) + ‘.’ + base64UrlEncode(payload)), ‘密钥’) 生成
- payload 即载体，存放过期时间用户信息等等，不应该在载体存放敏感信息，因为该部分是客户端可解密的部分

## 防篡改

- 通过比对 signature，用客户端传过来的这个 token，把头部和载体拿出来再算一遍 signature，和 token 里面带的那个 signature 比对是否一致

## 缺点

缺点就是一旦签发不可撤销

# 单元测试

- 定义：是指对软件中的最小可测试单元进行检查和验证。对于单元测试中单元的含义，一般来说，要根据实际情况去判定其具体含义，如 C 语言中单元指一个函数，Java 里单元指一个类，图形化的软件中可以指一个窗口或一个菜单等。总的来说，单元就是人为规定的最小的被测功能模块。单元测试是在软件开发过程中要进行的最低级别的测试活动，软件的独立单元将在与程序的其他部分相隔离的情况下进行测试。
- 前端开发我只对较为复杂的功能做单元测试，一些简单功能的没必要做，会增加比较多的工作量

## 前端常用单元测试框架

mocha、Jest 提供了单元测试所需的各种 API，你可以使用它们来对你的代码进行单元测试

# 对称加密 和 非对称加密

## 对称加密

- 加密与解密用的是同样的密钥
- 效率高
- 密钥越大，加密越强，但加密与解密的过程越慢
- 通常使用相对较小的密钥，一般小于 256 bit
- 缺点是不安全，在发送密钥的过程中，密钥有很大的风险会被黑客们拦截
- 通常的做法是将对称加密的密钥进行非对称加密，然后传送给需要它的人

## 非对称加密

- 使用了一对密钥，公钥（public key）和私钥（private key）
- 私钥只能由一方安全保管，不能外泄，
- 公钥则可以发给任何请求它的人
- 非对称加密使用这对密钥中的一个进行加密，而解密则需要另一个密钥
- 使用公钥对消息加密，只有私钥的持有人才能对消息解密
- 不需要将私钥通过网络发送出去，因此安全性大大提高
- 常用的非对称加密算法是 RSA 算法
- 相对对称加密较慢
- 解决：将对称加密的密钥使用非对称加密的公钥进行加密，然后发送出去，接收方使用私钥进行解密得到对称加密的密钥，然后双方可以使用对称加密来进行沟通

# 进程和线程

- 进程 是操作系统进行资源分配和调度的独立单位，是应用程序运行的载体
- 线程是程序执行的最小单位，而进程是操作系统分配资源的最小单位
- 一个进程由一个或多个线程组成，线程是一个进程中代码的不同执行路线
- 同一个进程下的所有线程共享该进程的所有资源

# ESLint 常用哪个规范？

- airbnb

# React 与 Vue 异同

React 是手动挡，Vue 是自动挡

- 异
  - react 是函数式思想，all in js ，jsx 语法，js 操控 css
  - react 是单项数据流
  - react 每当应用的状态被改变时，全部子组件都会重新渲染。当然，这可以通过 shouldComponentUpdate 这个生命周期方法来进行控制，如果为 true 继续渲染、false 不渲染，但 Vue 将此视为默认的优化
  - react 对 ts 更友好一些
  - vue 是响应式思想，也就是基于数据可变的。把 html、js、css、组合到一起，也可以通过标签引擎组合到一个页面中
  - vue 是双向绑定
  - Vue 宣称可以更快地计算出 Virtual DOM 的差异，这是由于它在渲染过程中，会跟踪每一个组件的依赖关系，不需要重新渲染整个组件树
- 同
  - 使用 Virtual DOM，都有 jsx，性能好
  - 都是数据驱动视图

# 后端一次给 10 万条数据，如何处理展示

- 直接遍历渲染（耗时最高，不推荐）
- setTimeout 分页渲染：把 10w 按照每页数量 limit 分成总共 Math.ceil(total / limit)页，然后利用 setTimeout，每次渲染 1 页数据
- 使用 requestAnimationFrame 代替上一条的 setTimeout
- 文档碎片(createDocumentFragment) + requestAnimationFrame
- 懒加载：在列表尾部放一个空节点 blank，等到 blank 出现在视图中（使用 getBoundingClientRect），就说明到底了，这时候再加载第二页，以此类推
- 虚拟列表

# 跨浏览器开发最佳实践

- 封装
- 垫片 polyfill
- 不要污染全局

# 调试排错技巧

参考：

- <https://developer.chrome.com/docs/devtools/>
- [前端界有哪些越早知道越好的小技巧、小知识？](https://www.zhihu.com/question/43687153/answer/149944688)
- [IDEA debug 断点调试技巧](https://blog.csdn.net/minkeyto/article/details/81489041)

## 浏览器

- 使用 debugger 关键字
- source 面板打断点
- chrome 移动页面调试工具：chrome://inspect/#devices
- chrome dev tools 的请求重放功能
- webstorm 的 debug JavaScript in chrome 功能

## react

- redux devtools
- react developer tools
- [Top five useful Chrome Dev Tools tips for React](https://isamatov.com/react-chrome-dev-tools-tips/)

## Nodejs

- 使用 VScode 或 webstorm 的 debug 功能完全满足

# 使用 pscp 实现 Windows 和 Linux 服务器间远程传递文件

- PSCP (PuTTY Secure Copy client)是 PuTTY 提供的文件传输工具，通过 SSH 连接，在两台机器之间安全的传输文件，可以用于任何 SSH（包括 SSH v1、SSH v2）服务器。

# redis 的雪崩和穿透

## 原因

某个时刻，多个键同时失效，大量请求打进数据库

## 解决

封装 redis 的 set 方法时，给过期时间随即加上时间戳

# 什么是 Base64

- 一个可逆编码算法
- 可以将二进制数据（比如图片）转化为可打印字符，方便传输数据
- 内容编码后体积变大， 至少 1/3，因为是三字节变成四个字节，当只有一个字节的时候，也至少会变成三个字节。

## 由来

早期邮件传输协议基于 ASCII 文本，对于诸如图片、视频等二进制文件处理并不好。 ASCII 主要用于显示现代英文，到目前为止只定义了 128 个字符，包含控制字符和可显示字符。 为了解决上述问题，Base64 编码顺势而生。

Base64 是编解码，主要的作用不在于安全性，而在于让内容能在各个网关间无错的传输，这才是 Base64 编码的核心作用。

## 算法描述

- 三个字节作为一组，一共是 24 个二进制位，字节数不能被 3 整除，用 0 字节值在末尾补足
- 即：如果一个数据有 6 个字节，可编码后将包含(6/3)\*4=8 个字节
- 按照 6 个比特位一组分组，前两位补 0，凑齐 8 位
- 计算每个分组的数值
- 当数据的长度无法满足 3 的倍数的情况下，最后的数据需要进行填充操作，即补“=”
- 将原始数据的每三个字节分为一组，按位进行分割为每 6 位一个字节的形式，进行转换，形成新的 4 个字节。这四个字节才通过 Base64 编码表进行映射，形成最后实际的 Base64 编码结果。
- 如果原始数据最后无法凑成 3 个字节，则补填充，以“=”作为替换，代表没有数据

Base64 编码索引表：

![](./resource/base64%E7%BC%96%E7%A0%81%E7%B4%A2%E5%BC%95%E8%A1%A8.png)

## 使用场景

- JSON 中传递二进制数据
- canvas 图片生成
- jwt
- webpack 处理小图，减少 http 请求

# Unicode 字符集

计算机使用 0 和 1 来存储文本。比如字符“C”被存成“01000011”，那么计算机在显示这个字符时需要经过两个步骤：

- 计算机读取“01000011”，得到数字 67，因为 67 被编码成“01000011”。
- 计算机在 Unicode 字符集中查找 67，找到了“C”。
